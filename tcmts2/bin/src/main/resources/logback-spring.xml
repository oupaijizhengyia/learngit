<?xml version="1.0" encoding="UTF-8"?>
<configuration>
	<timestamp key="date" datePattern="yyyy-MM-dd" />
	<appender name="STDOUT" class="ch.qos.logback.core.ConsoleAppender">
		<encoder>
			<pattern>%d{HH:mm:ss.SSS} [%thread] %-5level %logger{36} - %msg%n
			</pattern>
		</encoder>
	</appender>
	<appender name="FILE"
		class="ch.qos.logback.core.rolling.RollingFileAppender">
		<filter class="ch.qos.logback.classic.filter.ThresholdFilter">
			<level>DEBUG</level>
		</filter>
		<File>logs/tcmts2.log</File>
		<rollingPolicy class="ch.qos.logback.core.rolling.TimeBasedRollingPolicy">
			<fileNamePattern>logs/tcmts2.%d{yyyy-MM-dd}.log
			</fileNamePattern>
		</rollingPolicy>
		<encoder charset="UTF-8">
			<pattern>%d{HH:mm:ss.SSS} [%t] %p %c{32}#%M - %m%n</pattern>
		</encoder>
	</appender>
	<appender name="ERRORFILE"
		class="ch.qos.logback.core.rolling.RollingFileAppender">
		<!--See also http://logback.qos.ch/manual/appenders.html#RollingFileAppender -->
		<filter class="ch.qos.logback.classic.filter.ThresholdFilter">
			<level>ERROR</level>
		</filter>
		<File>logs/tcmts2-error.log</File>
		<encoder>
			<pattern>%d %p [%c] - %m%n</pattern>
		</encoder>
		<rollingPolicy class="ch.qos.logback.core.rolling.FixedWindowRollingPolicy">
			<maxIndex>5</maxIndex>
			<FileNamePattern>logs/tcmts2-error.log.%i
			</FileNamePattern>
		</rollingPolicy>
		<triggeringPolicy
			class="ch.qos.logback.core.rolling.SizeBasedTriggeringPolicy">
			<MaxFileSize>512MB</MaxFileSize>
		</triggeringPolicy>
	</appender>
	<!--过滤重复的log AllowedRepetitions: 过滤多少条， 默认为5 -->
	<turboFilter class="ch.qos.logback.classic.turbo.DuplicateMessageFilter" />
	<appender name="EMAIL_UAT" class="ch.qos.logback.classic.net.SMTPAppender">
		<filter class="ch.qos.logback.classic.filter.ThresholdFilter">
			<level>ERROR</level>
		</filter>
		<Layout class="ch.qos.logback.classic.html.HTMLLayout" />
		<smtpHost>smtp.exmail.qq.com</smtpHost>
		<username>uat@tangusoft.com</username>
		<password>Tangu123</password>
		<SSL>false</SSL>
		<!-- <to>546989498@qq.com</to> -->
		<to>alert@tangusoft.com</to>
		<from>uat@tangusoft.com</from>
		<cyclicBufferTracker class="ch.qos.logback.core.spi.CyclicBufferTracker">
			<bufferSize>1</bufferSize>
		</cyclicBufferTracker>
		<STARTTLS>false</STARTTLS>
		<includeCallerData>true</includeCallerData>
		<asynchronousSending>false</asynchronousSending>
		<subject>
			<subject>新煎药系统-测试 - %m</subject>
		</subject>
	</appender>
	<appender name="EMAIL_PROD" class="ch.qos.logback.classic.net.SMTPAppender">
		<filter class="ch.qos.logback.classic.filter.ThresholdFilter">
			<level>ERROR</level>
		</filter>
		<Layout class="ch.qos.logback.classic.html.HTMLLayout" />
		<smtpHost>smtp.exmail.qq.com</smtpHost>
		<username>bt@tangusoft.com</username>
		<password>Tangu123</password>
		<SSL>false</SSL>
		<to>devteam@tangusoft.com</to>
		<from>bt@tangusoft.com</from>
		<cyclicBufferTracker class="ch.qos.logback.core.spi.CyclicBufferTracker">
			<bufferSize>1</bufferSize>
		</cyclicBufferTracker>
		<STARTTLS>false</STARTTLS>
		<includeCallerData>true</includeCallerData>
		<asynchronousSending>false</asynchronousSending>
		<subject>
			<subject>新煎药系统-正式 - %m</subject>
		</subject>
	</appender>


	<springProfile name="uat">
		<logger name="com.tangu" level="DEBUG" addtivity="false">
			<appender-ref ref="FILE" />
		</logger>
		<root level="INFO">
			<appender-ref ref="ERRORFILE" />
			<appender-ref ref="EMAIL_UAT" />
		</root>
	</springProfile>


	<springProfile name="prod">
		<logger name="com.tangu" level="DEBUG" addtivity="false">
			<appender-ref ref="FILE" />
		</logger>
		<root level="INFO">
			<appender-ref ref="ERRORFILE" />
			<appender-ref ref="EMAIL_PROD" />
		</root>
	</springProfile>

	<!--无锡中医院-->
	<springProfile name="wxzyy">
		<logger name="com.tangu" level="DEBUG" addtivity="false">
			<appender-ref ref="FILE" />
		</logger>
		<root level="INFO">
			<appender-ref ref="ERRORFILE" />
		</root>
	</springProfile>

	<springProfile name="!prod">
		<root level="DEBUG">
			<appender-ref ref="STDOUT" />
		</root>
	</springProfile>

</configuration>

